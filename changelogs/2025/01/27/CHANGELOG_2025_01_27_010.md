# Changelog 2025-01-27 #010

## [FIX] Naprawiono bdy TypeScript w tokenizer'ach i obsudze list

### Before
Po aktualizacji `micromark` i powizanych paczek, pojawiy si bdy TypeScript w tokenizer'ach:

```typescript:src/remark-plugins/wikilink.ts
function enter(code: Code): State | void {
  // Stary typ zwracany przez funkcje pomocnicze
}
```

```typescript:src/utils/parse-note.ts
case "listItem": {
  if (!isListItem(node)) return
  if (typeof node.checked === "boolean") {  // Nieprawidowe sprawdzanie typu
    tasks.push({
      completed: node.checked === true,
      text: toString(node),
    })
  }
  break
}
```

### Why
1. Aktualizacja `micromark-util-types` wymaga, 偶eby funkcje pomocnicze zwracay `State | undefined` zamiast `State | void`.
2. Typ `ListItem` z `mdast` mo偶e mie `checked` jako `boolean | null | undefined`, ale sprawdzalimy tylko `boolean`.

### Changed
1. Naprawiono typy w tokenizer'ach:

```typescript:src/remark-plugins/wikilink.ts
function enter(code: Code): State | undefined {
  if (isOpeningMarkerChar(code)) {
    effects.enter(types.wikilink)
    effects.enter(types.wikilinkMarker)
    effects.consume(code)
    return exitOpeningMarker
  } else {
    return nok(code)
  }
}
```

2. Poprawiono obsug `checked` w `ListItem`:

```typescript:src/utils/parse-note.ts
case "listItem": {
  if (!isListItem(node)) return
  if (node.checked !== null && node.checked !== undefined) {
    tasks.push({
      completed: node.checked === true,
      text: toString(node),
    })
  }
  break
}
```

3. Zaktualizowano typy w pozostaych tokenizer'ach:
   - `src/remark-plugins/tag.ts`
   - `src/remark-plugins/embed.ts`

### Impact
- Naprawiono wszystkie bdy TypeScript w tokenizer'ach
- Poprawiono obsug list zada (task lists)
- Zachowano pen kompatybilno z najnowsz wersj `micromark`
- Zero bd贸w TypeScript w projekcie! 

### Files Changed
- `src/remark-plugins/wikilink.ts`
- `src/remark-plugins/tag.ts`
- `src/remark-plugins/embed.ts`
- `src/utils/parse-note.ts`

### Testing
1. Podstawowa funkcjonalno:
   - Tworzenie wikilink贸w (`[[note]]`)
   - Tworzenie embed贸w (`![[note]]`)
   - Tworzenie tag贸w (`#tag`)
   - Tworzenie list zada (`- [ ] task`)
   - Oczekiwane: Wszystkie elementy renderuj si poprawnie
   - Czas: ~5min

2. Edge cases:
   - Testy list z r贸偶nymi stanami (checked, unchecked, bez checkboxa)
   - Testy tokenizer'贸w z r贸偶nymi znakami specjalnymi
   - Oczekiwane: Wszystkie przypadki obsu偶one prawidowo
   - Czas: ~10min 